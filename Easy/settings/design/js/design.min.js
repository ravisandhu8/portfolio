!function(e){e.localize=function(e){return n[e]};var n={"changes are saved":"All changes are saved","changes are not saved":"Changes have NOT been saved. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","settings are not initialize":"Template settings are not initialized. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","graphical customization":"Graphical customization",cartoon:"Cartoon light",grey:"Grey scheme",black:"Black scheme",flat:"Flat scheme","custom course logo":"Custom course logo:",or:"or","upload logo image":"Upload logo image","upgrade account hint":'You have to <a target="_blank" href="/account/upgrade">upgrade your account</a> in order to set custom course logo',"recomend size":"- recommended size 300x50 px, allowed formats: jpeg, jpg, png, bmp, gif","logo update":"Change","logo remove":"Clear","choose color scheme":"Choose color scheme:",scheme:"Scheme:","background change":"Change background:","background update":"Change background","background remove":"Clear background","background original":"Original","background repeat":"Repeat","background fullscreen":"Fullscreen","background upgrade account hint":'You have to <a target="_blank" href="/account/upgrade">upgrade your account</a> in order to set custom course background',"Choose objective style:":"Choose objectives list style:","Display table of content:":"Display table of content:","Dont show":"Don't show",Show:"Show"}}(window.app=window.app||{}),function(){ko.bindingHandlers.localize={init:function(e,n){var t=$(e),a=ko.unwrap(n());t.html(app.localize(a))}},ko.bindingHandlers.switchToggle={init:function(e,n){var t=ko.bindingHandlers.switchToggle,a=t.viewModel(e,n),o=ko.unwrap(n().value());a.setInitialValue(o),t.onClick(e,function(){a.toggle();var e=ko.unwrap(n().value());n().value(!e)})},update:function(e,n){var t=ko.bindingHandlers.switchToggle.viewModel(e,n),a=ko.unwrap(n().value());t.updateValue(a)},viewModel:function(e){function n(e){i(e),r(e)}function t(){var e=a();i(!e),u.stop().animate({marginLeft:s(!e)},250)}function a(){return c.hasClass("on")}function o(e){a()!=e&&n(e)}function i(e){c.toggleClass("on",e),c.toggleClass("off",!e)}function r(e){u.css("margin-left",s(e)+"px")}function s(e){return e?0:c.height()-c.width()}var c=$(e),u=$(".switch-toggle-wrapper",c);return{setInitialValue:n,updateValue:o,toggle:t}},onClick:function(e,n){var t=$(e),a=!1;t.mousedown(function(e){1==e.which&&(a=!0,n())}),t.click(function(){return a?void(a=!1):void n()})}}}(),function(e){function n(e,n){function t(e){e&&void 0!==e.enabled&&o.enabled(e.enabled),o.enabled.subscribe(function(){n()})}function a(){return{enabled:o.enabled()}}var o=this;o.enabled=ko.observable(!0),o.getData=a,t(e)}function t(e,n){function t(e){e&&o.enabled(e.enabled),o.enabled.subscribe(function(){n()})}function a(){return{enabled:o.enabled()}}var o=this;o.enabled=ko.observable(!0),o.getData=a,t(e)}function a(e,n){function t(e){e&&e.key&&s.selectByName(e.key)}function a(e){ko.utils.arrayForEach(s.list,function(e){e.isSelected(!1)}),e.isSelected(!0),n()}function o(e){ko.utils.arrayForEach(s.list,function(n){n.isSelected(n.name===e)})}function i(){return{key:s.selectedLayoutName()}}function r(e,n){var t=this;return t.name=e,t.isSelected=ko.observable(n===!0),t}var s=this;return s.list=[new r("Tiles",(!0)),new r("List")],s.selectedLayoutName=ko.computed(function(){var e="";return ko.utils.arrayForEach(s.list,function(n){n.isSelected()&&(e=n.name)}),e},s),s.select=a,s.selectByName=o,s.getData=i,t(e),s}e.SectionsPageModel=n,e.TreeOfContentModel=t,e.SectionsLayoutModel=a}(window.app=window.app||{}),function(e){var n=null,t=null,a={isError:ko.observable(!1),sectionsPage:null,treeOfContent:null,sectionsLayout:null};a.getCurrentSettingsData=function(e){return $.extend({},e||n,{treeOfContent:a.treeOfContent.getData(),sectionsLayout:a.sectionsLayout.getData(),sectionsPage:a.sectionsPage.getData()})},a.getCurrentExtraData=function(){return{}},a.saveChanges=function(){var o=a.getCurrentSettingsData(),i=a.getCurrentExtraData(),r=JSON.stringify(o),s=JSON.stringify(i);JSON.stringify(n)===r&&JSON.stringify(t)===s||window.egApi.saveSettings(r,s,e.localize("changes are saved"),e.localize("changes are not saved")).done(function(){n=o,t=i})},a.init=function(){var o=window.egApi;return o.init().then(function(){var i=o.getManifest(),r=i.defaultTemplateSettings,s=o.getSettings();a.sectionsLayout=new e.SectionsLayoutModel(s.sectionsLayout||r.sectionsLayout,a.saveChanges),a.treeOfContent=new e.TreeOfContentModel(s.treeOfContent||r.treeOfContent,a.saveChanges),a.sectionsPage=new e.SectionsPageModel(s.sectionsPage||r.sectionsPage,a.saveChanges),n=a.getCurrentSettingsData(s),t=a.getCurrentExtraData()}).fail(function(){a.isError(!0)})},a.init().always(function(){$(document).ready(function(){ko.applyBindings(a,$(".settings-container")[0]),$(window).on("blur",a.saveChanges)})})}(window.app=window.app||{});