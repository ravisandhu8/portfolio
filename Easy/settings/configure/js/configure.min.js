!function(e){e.localize=function(e){return n[e]};var n={"changes are saved":"All changes are saved","changes are not saved":"Changes have NOT been saved. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","settings are not initialize":"Template settings are not initialized. Please reload the page and change the settings again. Contact support@easygenerator.com if problem persists.","general settings":"General Settings","pdf export":"PDF export (experimental):","show download as pdf button":'Show button "Download course in PDF format"',"conduct learner satisfaction survey":"Conduct learner satisfaction survey","allow users to download certificates":"Allow users to download certificates","results tracking":"Results Tracking",lrs:"LRS",webhooks:"Webhooks",chooseLrsLabel:'Choose LRS <span>(Learning Record Store <a href="https://help.easygenerator.com/results-tracking/results-tracking-via-lrs" target="_blank">Learn more</a>)</span>',"default":"easygenerator (recommended)",custom:"Custom LRS",addWebhookEndpoinLabel:'Add a webhook endpoint: <a href="https://help.easygenerator.com/additional-features/webhooks" target="_blank">Learn more</a>',webhookUrlLabel:"URL to be called",urlCheckButtonText:"Check URL",checkErrorMessage:"An error appears",checkSuccessMessage:"URL successfully reached","track and trace settings":"Track and trace settings","results tracking option":"Results tracking:","results tracking hint":"(will not affect tracking and tracing in SCORM/LMS)","allow user to skip option":"Allow user to skip tracking and tracing:","allow scoring of content pages":"Allow scoring of content pages:","show confirmation popup":"Show confirmation dialogue:","show confirmation popup hint":"(when submitting final results)",disabled:"Disabled",enabled:"Enabled",allow:"Allow",forbid:"Forbid",hide:"Hide",show:"Show","advanced settings":"Advanced settings","report to":"Report to:","custom lrs settings":"Custom LRS settings","lrs url":"LRS URL","authentication required":"Authentication required","lap login":"LAP login","lap password":"LAP password","use statements":"Use statements:",started:"Started",stopped:"Stopped",passed:"Passed",answered:"Answered",mastered:"Mastered",experienced:"Experienced",failed:"Failed",progressed:"Progressed","save progress cross device":"Save progress cross device (requires login and password):","save progress cross device hint":"(will not affect progress saving in SCORM/LMS)","allow social media":"Allow login via social media",authorsBioTooltip:'This information will be shown to learners on the introduction page <a href="http://help.easygenerator.com/getting-started/billing-info-and-account-settings" target="blank" >Learn more</a>',"about the author block:":"'About the author' block:","show about the author block on the introduction course page":"The 'About the author' block on the introduction course page","information is taken from your profile settings":'(NOTE: the information is taken from your  <a href="/#accountsettings" target="_parent">profile settings</a>)',"mastery score settings":"Mastery score settings","mastery score caption":"Mastery score:","mastery score hint":"(for each learning objective):","template language":"Template language",xx:"Custom",cn:"Chinese",de:"German",da:"Danish",en:"English",fr:"French",it:"Italian",nl:"Dutch","nl-inf":"Dutch (informal)",tr:"Turkish",ua:"Ukrainian",es:"Spanish","pt-br":"Portuguese (Brazil)",ru:"Russian",ms:"Malay",kr:"Korean","nb-no":"Norwegian (Bokmal)","nn-no":"Norwegian (Nynorsk)",vi:"Vietnamese",fa:"Farsi",sv:"Swedish",pl:"Polish",kin:"Kinyarwanda",ca:"Catalan",ar:"Arabic",ro:"Romanian",cs:"Czech",fi:"Finnish",el:"Greek",lv:"Latvian",hu:"Hungarian","choose language for your course":"Choose language for your course",defaultText:"Default",translation:"Translation","copyright text":"Copyright text:",copyrightPlaceholder:"Copyright Â© {year} Easygenerator"}}(window.app=window.app||{}),function(){ko.bindingHandlers.number={init:function(e){var n=$(e),t=100;n.on("keydown",function(e){var n=e.charCode||e.keyCode||0;return 8==n||9==n||46==n||n>=37&&n<=40||n>=48&&n<=57||n>=96&&n<=105}),n.on("keyup",function(){$(this).val()>t&&$(this).val(t)})}},ko.bindingHandlers.disableDragNDrop={init:function(e){$(e).on("dragstart",function(e){e.preventDefault()})}},ko.bindingHandlers.spinner={init:function(e,n){var t=n();$(e).spinner("changing",function(e,n){t(n)})}},ko.bindingHandlers.switchToggle={init:function(e,n){var t=ko.bindingHandlers.switchToggle,o=t.viewModel(e,n),a=ko.unwrap(n().value()),r=n().onBeforeValueUpdated;o.setInitialValue(a),t.onClick(e,function(){var e=ko.unwrap(n().value()),t=!e;r&&!r(t)||(o.toggle(),n().value(t))})},update:function(e,n){var t=ko.bindingHandlers.switchToggle.viewModel(e,n),o=ko.unwrap(n().value());t.updateValue(o)},viewModel:function(e){function n(e){r(e),i(e)}function t(){var e=o();r(!e),c.stop().animate({marginLeft:s(!e)},250)}function o(){return l.hasClass("on")}function a(e){o()!=e&&n(e)}function r(e){l.toggleClass("on",e),l.toggleClass("off",!e)}function i(e){c.css("margin-left",s(e)+"px")}function s(e){return e?0:l.height()-l.width()}var l=$(e),c=$(".switch-toggle-wrapper",l);return{setInitialValue:n,updateValue:a,toggle:t}},onClick:function(e,n){var t=$(e),o=!1;t.mousedown(function(e){1==e.which&&(o=!0,n())}),t.click(function(){return o?void(o=!1):void n()})}},ko.bindingHandlers.dropdown={cssClasses:{dropdown:"dropdown",disabled:"disabled",expanded:"expanded",optionsList:"dropdown-options-list",optionItem:"dropdown-options-item",currentItem:"dropdown-current-item",currentItemText:"dropdown-current-item-text",indicatorHolder:"dropdown-indicator-holder",indicator:"dropdown-indicator"},init:function(e,n){var t=$(e),o=ko.bindingHandlers.dropdown.cssClasses;t.addClass(o.dropdown);var a=$("<div />").addClass(o.currentItem).appendTo(t);$("<div />").addClass(o.currentItemText).appendTo(a);var r=$("<div />").addClass(o.indicatorHolder).appendTo(a);$("<span />").addClass(o.indicator).appendTo(r),$("<ul />").addClass(o.optionsList).appendTo(t),a.on("click",function(e){t.hasClass(o.disabled)||(a.toggleClass(o.expanded),e.stopPropagation())});var i=function(){a.removeClass(o.expanded)};$("html").bind("click",i),$(window).bind("blur",i),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$("html").unbind("click",i),$(window).unbind("blur",i)})},update:function(e,n){var t=$(e),o=ko.bindingHandlers.dropdown.cssClasses,a=t.find("ul."+o.optionsList),r=t.find("div."+o.currentItemText),i=n().options,s=n().optionsText,l=n().value,c=n().optionsValue,d=ko.unwrap(l),u=ko.unwrap(n().disable);u?t.toggleClass(o.disabled):t.removeClass(o.disabled),a.empty(),$.each(i,function(e,n){return n[c]==d?void r.text(n[s]):void $("<li />").addClass(o.optionItem).appendTo(a).text(n[s]).on("click",function(e){l(n[c]),t.trigger("change")})})}},ko.bindingHandlers.tabs={init:function(e){var n=$(e),t="data-tab-link",o="data-tab",a="active",r=n.find("["+t+"]"),i=n.find("["+o+"]");i.hide(),r.first().addClass(a),i.first().show(),r.each(function(e,s){var l=$(s);l.on("click",function(){var e=l.attr(t),s=n.find("["+o+'="'+e+'"]');r.removeClass(a),l.addClass(a),i.hide(),s.show()})})}},ko.bindingHandlers.localize={init:function(e,n){var t=$(e),o=ko.unwrap(n());t.html(app.localize(o))}},ko.bindingHandlers.tip={init:function(e,n){var t=$(e),o=n(),a=ko.unwrap(o.key),r=ko.unwrap(o.triggerEvent),i=ko.unwrap(o.maxWidth);t.on(r,function(){if($(".tooltip").length)$(".tooltip").remove();else{$("body").append('<div class="tooltip configure-tab" role="tooltip" style="max-width: '+i+'px;"><div class="tooltip-arrow"></div><div class="tooltip-text">'+app.localize(a)+"</div></div>");var e={top:t.offset().top-$(".tooltip").outerHeight()-4,left:t.offset().left-$(".tooltip").outerWidth()/2+t.outerWidth()/2};$(".tooltip").css({top:e.top,left:e.left}).addClass("shown")}})}}}(),function(e){function n(e){function n(e){e&&o.enabled(e.enabled)}function t(){return{enabled:o.enabled()}}var o=this;o.enabled=ko.observable(!1),o.getData=t,n(e)}function t(e){function n(e){e&&o.enabled(e.enabled)}function t(){return{enabled:o.enabled()}}var o=this;o.enabled=ko.observable(!1),o.getData=t,n(e)}function o(e){function n(e){(e||e.url)&&a.url(e.url)}function t(){return{url:a.url()}}function o(){a.isChecking(!0),$.ajax({url:a.url(),type:"POST",cache:!1,contentType:"application/json",data:JSON.stringify(i)}).done(function(){a.checkStatus(r.success)}).fail(function(){a.checkStatus(r.error)}).always(function(){a.isChecking(!1)})}var a=this,r={notChecked:"notChecked",success:"success",error:"error"},i={courseId:"courseId",learnerId:"example@example.com",score:75,finishedOn:(new Date).toISOString(),status:"passed"};a.url=ko.observable(""),a.isChecking=ko.observable(!1),a.checkStatus=ko.observable(r.notChecked),a.statuses=r,a.getData=t,a.checkUrl=o,n(e)}function a(e){function n(e){e&&(u.enableXAPI(e.enabled),u.allowToSkipTracking(!e.required),e.selectedLrs&&u.selectLrsByName(e.selectedLrs),e.lrs&&u.setCustomLrsSettings(e.lrs),e.allowedVerbs&&u.setStatements(e.allowedVerbs))}function t(){u.advancedSettingsExpanded(!u.advancedSettingsExpanded())}function o(e){ko.utils.arrayForEach(u.reportsOptions,function(e){e.isSelected(!1)}),e.isSelected(!0)}function a(e){ko.utils.arrayForEach(u.lrsOptions,function(e){e.isSelected(!1)}),e.isSelected(!0)}function r(e){ko.utils.arrayForEach(u.lrsOptions,function(n){n.isSelected(n.name===e)})}function i(e){ko.utils.objectForEach(u.statements,function(n,t){t(e.indexOf(n)>-1)})}function s(e){u.lrsUrl(e.uri||""),u.authenticationRequired(e.authenticationRequired||!1),u.lapLogin(e.credentials.username||""),u.lapPassword(e.credentials.password||"")}function l(){var e=[];return ko.utils.objectForEach(u.statements,function(n,t){t()&&e.push(n)}),{enabled:u.enableXAPI(),required:!u.allowToSkipTracking(),selectedLrs:u.selectedLrs(),lrs:{uri:u.lrsUrl().trim(),authenticationRequired:u.authenticationRequired(),credentials:{username:u.lapLogin().trim(),password:u.lapPassword().trim()}},allowedVerbs:e}}function c(e,n){var t=this;return t.name=e,t.isSelected=ko.observable(n),t}function d(e,n){var t=this;return t.name=e,t.isSelected=ko.observable(n===!0),t}var u=this;return u.advancedSettingsExpanded=ko.observable(!1),u.enableXAPI=ko.observable(!0),u.allowToSkipTracking=ko.observable(!0),u.reportsOptions=[new c("lrs",(!0)),new c("webhooks")],u.lrsOptions=[new d("default",(!0)),new d("custom")],u.selectedLrs=ko.computed(function(){var e="";return ko.utils.arrayForEach(u.lrsOptions,function(n){n.isSelected()&&(e=n.name)}),e},u),u.customLrsEnabled=ko.computed(function(){return u.enableXAPI()&&u.selectedLrs()!=u.lrsOptions[0].name}),u.lrsUrl=ko.observable(""),u.authenticationRequired=ko.observable(!1),u.lapLogin=ko.observable(),u.lapPassword=ko.observable(),u.credentialsEnabled=ko.computed(function(){return u.customLrsEnabled()&&u.authenticationRequired()}),u.statements={started:ko.observable(!0),stopped:ko.observable(!0),experienced:ko.observable(!0),mastered:ko.observable(!0),answered:ko.observable(!0),passed:ko.observable(!0),failed:ko.observable(!0),progressed:ko.observable(!0)},u.toggleAdvancedSettings=t,u.selectReports=o,u.selectLrs=a,u.selectLrsByName=r,u.setStatements=i,u.setCustomLrsSettings=s,u.getData=l,n(e),u}function r(n,t){function o(e,n){var t=e.name.toLowerCase(),o=n.name.toLowerCase();return t<o?-1:t>o?1:0}function a(n,t){ko.utils.arrayForEach(n||[],function(n){s(new d(n.code,e.localize(n.code),n.url))}),u.languages.sort(o);var a=l(p),r=new d(g,e.localize(g),a?a.resourcesUrl:null,t?t.customTranslations:null);s(r);var i=t&&t.selected?t.selected:p;u.selectedLanguageCode(i)}function r(){return u.selectedLanguageCode()===g}function i(){var e=l(g);return e?e.getNotMappedTranslations():[]}function s(e){u.languages.push(e)}function l(e){return ko.utils.arrayFirst(u.languages,function(n){return n.code===e})}function c(){var e={};u.selectedLanguageCode()&&(e.selected=u.selectedLanguageCode());var n=i();return n&&!$.isEmptyObject(n)&&(e.customTranslations=n),e}function d(e,n,t,o){function a(e){g=c(e)}function r(){return g}function i(){return d(g)}function s(){return l(u.resourcesUrl).then(function(e){if(p){var n={};$.each(e,function(e,t){n[e]="string"==typeof p[e]?p[e]:t}),u.setTranslations(n)}else u.setTranslations(e);u.isLoaded=!0})}function l(e){return $.ajax({url:e,dataType:"json",contentType:"application/json"})}function c(e){var n=[];return e&&Object.keys(e).forEach(function(t){n.push({key:t,value:e[t]})}),n}function d(e){var n={};return e&&e.forEach(function(e){n[e.key]=e.value}),n}var u=this,g=[],p=o;u.code=e,u.name=n,u.isLoaded=!1,u.load=s,u.resourcesUrl=t,u.setTranslations=a,u.getTranslations=r,u.getNotMappedTranslations=i,o&&u.setTranslations(o)}var u=this,g="xx",p="en";u.languages=[];var f=ko.observable(t&&t.selected?t.selected:null);return u.selectedLanguageCode=ko.pureComputed({read:function(){return f()},write:function(e){var n=l(e);if(n){if(n.isLoaded)return void f(e);u.isLanguageLoading(!0),n.load().done(function(){f(e),u.isLanguageLoading(!1)})}}}),u.selectedLanguageTranslations=ko.pureComputed(function(){var e=l(u.selectedLanguageCode());return e?e.getTranslations():null}),u.isLanguageLoading=ko.observable(!1),u.isLanguageEditable=r,u.getCustomTranslations=i,u.getData=c,a(n,t),u}function i(e){function n(){return{score:t.score()}}var t=this;return t.score=ko.observable(e&&e.score?e.score:100),t.getData=n,t}e.TrackingDataModel=a,e.LanguagesModel=r,e.MasteryScore=i,e.PdfExport=n,e.Nps=t,e.Webhooks=o}(window.app=window.app||{}),function(e){function n(e){return e.replace("{year}",(new Date).getFullYear())}var t=null,o=null,a={isError:ko.observable(!1),trackingData:null,masteryScore:null,languages:null,pdfExport:null,nps:null,webhooks:null,authorsBio:ko.observable(!1),showConfirmationPopup:ko.observable(!0),allowContentPagesScoring:ko.observable(!1),allowCrossDeviceSaving:ko.observable(!0),allowSocialLogin:ko.observable(!0),allowxApiSettings:ko.observable(!0),allowCertificateDownload:ko.observable(!1),copyright:ko.observable(""),copyrightPlaceholder:ko.observable("")};a.getCurrentSettingsData=function(e){return $.extend({},e||t,{pdfExport:a.pdfExport.getData(),nps:a.nps.getData(),webhooks:a.webhooks.getData(),allowAuthorsBio:a.authorsBio(),xApi:a.trackingData.getData(),masteryScore:a.masteryScore.getData(),languages:a.languages.getData(),showConfirmationPopup:a.showConfirmationPopup(),allowContentPagesScoring:a.allowContentPagesScoring(),allowCrossDeviceSaving:a.allowCrossDeviceSaving(),allowLoginViaSocialMedia:a.allowSocialLogin(),allowxApiSettings:a.allowxApiSettings(),allowCertificateDownload:a.allowCertificateDownload(),copyright:a.copyright()})},a.getCurrentExtraData=function(){return{}},a.saveChanges=function(){var n=a.getCurrentSettingsData(),r=a.getCurrentExtraData(),i=JSON.stringify(n),s=JSON.stringify(r);JSON.stringify(t)===i&&JSON.stringify(o)===s||window.egApi.saveSettings(i,s,e.localize("changes are saved"),e.localize("changes are not saved")).done(function(){t=n,o=r})},a.onBeforeCertificateDownloadUpdated=function(e){return!(e&&!a.canUpdateAllowCertificateDownload)||(window.egApi.showCertificatesUpgradePopup(),!1)},a.init=function(){var r=window.egApi;return r.init().then(function(){function i(e,n,t){var o=null;l.hasOwnProperty(n)?o=l[n]:d.hasOwnProperty(n)&&(o=d[n]),null!==o&&e(t?t(o):o)}var s=r.getManifest(),l=r.getSettings(),c=r.getUser(),d=s&&s.defaultTemplateSettings?s.defaultTemplateSettings:{};a.pdfExport=new e.PdfExport(l.pdfExport||d.pdfExport),a.nps=new e.Nps(l.nps||d.nps),a.webhooks=new e.Webhooks(l.webhooks||d.webhooks),a.masteryScore=new e.MasteryScore(l.masteryScore||d.masteryScore),a.trackingData=new e.TrackingDataModel(l.xApi||d.xApi),a.languages=new e.LanguagesModel(s.languages,l.languages||d.languages),a.canUpdateAllowCertificateDownload=c.hasTeamAccess(),i(a.showConfirmationPopup,"showConfirmationPopup"),i(a.allowContentPagesScoring,"allowContentPagesScoring"),i(a.allowCrossDeviceSaving,"allowCrossDeviceSaving"),i(a.authorsBio,"allowAuthorsBio"),i(a.allowSocialLogin,"allowLoginViaSocialMedia"),i(a.allowxApiSettings,"allowxApiSettings"),i(a.allowCertificateDownload,"allowCertificateDownload"),i(a.copyright,"copyright",n),a.copyrightPlaceholder(n(e.localize("copyrightPlaceholder"))),t=a.getCurrentSettingsData(l),o=a.getCurrentExtraData()}).fail(function(){a.isError(!0)})},a.init().always(function(){$(document).ready(function(){ko.applyBindings(a,$(".settings-container")[0]),$(window).on("blur",a.saveChanges)})})}(window.app=window.app||{});